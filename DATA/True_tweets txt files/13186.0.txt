It was an awkward coalition riven by political and sectarian differences, facing an elusive, fanatical enemy dug into an urban maze of narrow streets and alleyways. So, could Iraq s government really deliver on its vow to vanquish Islamic State? In the end, the army, Shi ite Muslim paramilitaries and Kurdish Peshmerga fighters mustered rare unity to end Islamic State s reign of terror in Iraq s second city Mosul, seat of the ultra-hardline Sunni insurgents   caliphate . Baghdad s victory in July 2017 after nine months of fighting was the coup de grace for the caliphate and came three years after a jihadist juggernaut seized one third of Iraq. But even with supportive U.S. air strikes, Baghdad s triumph came at a devastating cost for the once-vibrant, multicultural city in northern Iraq and the surrounding region. When Islamic State militants first arrived in Mosul in June 2014 after sweeping aside crumbling Iraqi army units, many Mosul residents initially welcomed them. The militants were Sunni Muslims, like many in Mosul who had accused the forces of then-Shi ite Prime Minister Nuri al-Maliki of widespread sectarian abuses. Islamic State consequently presented itself as Mosul s savior. But as jihadists brandishing AK-47 assault rifles began imposing an Islamist doctrine even more brutal and mediaeval than al Qaeda, its popularity soon faded. Maliki s successor, Haider al-Abadi, had long been seen as an ineffective leader who could not make tough decisions. However, a U.S.-backed campaign against IS in Mosul offered Abadi a chance to emerge as a steely statesman capable of taking on a group that had terrorized a sprawling city with beheadings in public squares while staging deadly attacks in the West. Just smoking one cigarette, an act IS saw as anti-Islamic, earned you dozens of lashes. Children were used as informers. Women in minority communities were turned into sex slaves. But taking back Mosul was never going to be easy. Long before the first shot was fired, Abadi and his advisers and military commanders had to tread cautiously, taking into account sectarian and ethnic sensitivities that could splinter the united front he urgently needed to establish. Iraqi and Kurdish intelligence agencies had recruited informers inside Mosul, from ex-soldiers and army officers to taxi drivers, who would face instant execution if caught. Even if an alliance of convenience was struck, glossing over sectarian splits, Mosul itself posed formidable physical obstacles. Key districts consisted of ancient little streets and alleyways inaccessible to tanks and armored vehicles, and they were so densely populated that U.S.-led coalition air strikes risked heavy civilian casualties. So, street by street, house by house, fighting was unavoidable. Such challenges first popped up in Mosul s hinterland as Kurdish forces slowly advanced against fierce IS resistance. In one village, a single IS sniper hunkered down in a house held up hundreds of Kurdish fighters, the U.S. special forces advising them and 40 of their vehicles. Eventually, his rifle went silent after three air strikes on the house. As pro-government forces inched forward, the United Nations warned of a possible humanitarian disaster and expressed fear that jihadists could seize civilians for use as human shields, and gun down anyone trying to escape. IS fighters   both Iraqis and foreigners