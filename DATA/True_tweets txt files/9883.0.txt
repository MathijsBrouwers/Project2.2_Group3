President Barack Obama’s bid to save his plan to spare millions of immigrants in the country illegally from deportation and give them work permits ran into trouble on Monday at the U.S. Supreme Court in a case testing the limits of presidential power. The court, with four conservative justices and four liberals, seemed divided along ideological lines during 90 minutes of arguments in the case brought by 26 states led by Texas that sued to block Obama’s unilateral 2014 executive action that bypassed Congress. Liberal justices voiced support for Obama’s action. The  conservatives sounded skeptical. A 4-4 decision would be a grim defeat for Obama because it would uphold lower court rulings that threw out his action last year and doom his quest to revamp a U.S. immigration policy he calls broken. More than a thousand people in favor of Obama’s action staged a raucous demonstration outside the white marble courthouse on a sunny spring day, with cheery mariachi music from a red-and-black clad band filling the air. A smaller group of Obama critics staged their own rally. In order to win, Obama would need the support of one of the court’s conservatives, most likely Chief Justice John Roberts or Anthony Kennedy. But they both at times hit the Obama administration’s lawyer, U.S. Solicitor General Donald Verrilli, with tough questions. Kennedy expressed concern that Obama had exceeded its authority by having the executive branch set immigration policy rather than carry out laws passed by Congress. “It’s as if the president is setting the policy and the Congress is executing it. That’s just upside down,” Kennedy said. A ruling is due by the end of June. Obama’s plan was tailored to let roughly 4 million people